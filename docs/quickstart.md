# CVE Crawler in 3 minutes or less

CVE Crawler is a basic library that does one thing: Crawl for the latest CVE entries.

Using it is rather easy, and you can make it run using the following example of code:

```ruby
require 'cve_core'

cve = CVE::Core.new # Create a new core of the CVE crawler which will manage the crawling, parsing, and filtering
cve.fetch # Fetch the latest entries, parse them, and return them as an array of CVE::Vulnerability
```

The crawler is meant to be used in an ongoing program, as such, you will want to use a loop or timer to call `cve.fetch` periodically.

```ruby
while true
  items = cve.fetch
  process_cve_vulnerabilities(items)
  sleep 120 # Be careful not to flood the server with HTTP requests by sleeping a while before attempting to find new CVE vulnerabilities.
```

## Separating from the core

You may choose to not make use of the core, and instead make use of the components individually.

```ruby
require 'cve_crawler'

crawler = CVE::Crawler.new('analyzed', true, 'user_agent/1.0')
puts crawler.crawl # Net::HTTPResponse
```

```ruby
require 'cve_parser'

parser = CVE::Parser.new
puts parser.parse(xml) # Array of CVE::Vulnerability
```

## Writing your own filter

You may not want to receive all CVE's, perhaps you want to remove specific ones. You may write your own filter.

It should at least implement a `filter` method, that returns true or false. True if it should be filtered (removed), and false if it should be kept.

```ruby
require 'cve_parser'

class MyOwnFilter
  def filter(cve_vulnerability)
    rand(2) == 1  
  end
end

custom_parser = CVE::Parser.new(MyOwnFilter.new)
```
